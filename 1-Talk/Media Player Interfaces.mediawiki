This is a difficult project by its nature as it's bridging projects with different philosophies and goals. It should be pretty obvious that there's going to be friction in creating some sort of DBus implementation. To alleviate the potential clashes between projects I originally suggested some sort of capabilities negotiation might be in order. However I, and others on the mailing lists, have come up with a set of ideas that I think we need to decide on first before proceeding to actually implement.

;KISS:
* just do basic playback functions (play, pause, stop, prev, next)
* limited functionality, but easy on clients and developers

;Limit the spec to similar media players:
* medialib players Amarok, XMMS2, and BMPx
* playlist players Amarok, XMMS2, BMPx, and VLC
* destroys potential for other players to implement the spec

;Capabilities negotiation:
* should only have a handful of sets of functionalities:
** playback
** playlist
** mediainfo
** medialib
* adds complication to the spec and clients have to deal with capabilities

;Common intersection object and individual objects
* make a common media player object where all the media player APIs overlap
* add objects that expose individual media player APIs
* begs the question of why one should bother with DBus instead of native API

[[Daniel Chokola]]


------
First, we need to ask the question: "What is the purpose of this interface?"

From my point of view it should be an interface used by application that primarily isn't controlling the media player. Some examples:
* voip application that wants to automatically stop playback when there is an incomming call
* irc client script that announces current track
* "enqueue in mediaplayer" in contextmenu in filebrowser
* some alarm clock app that starts music playback with a specific track 5 minutes before the real alarm goes on.
* dock/panel-app for showing current song.
* script that automatically stops music when your bluetooth phone goes out of range.
* whatever, if the functionality is provided unexpected uses tend to pop up.

With a common interface this kind of apps doesn't have to know about different media players, they just fire off some dbus messages to a standard place. 

To serve its purpose it must be very easy for the application to interface with the mediaplayer. Therefore the interface has to be as simple as possible, containing only the basic stuff, no capabilities negotiation should be needed.

[[User:Anders Gustafsson|Anders Gustafsson]]

------

Well, I think that a guaranteed basic set of capabilities should be something like:

* play, pause, stop, next, prev
* get a playlist entry's title/length, convenience RPCs for the current entry
* set playback volume, mute, adjust balance

Some players, e.g. Audacious, have some library-like qualities, such as Tuples, it may be better to split up medialib into something like:

* library/collections
* full-metadata

Also, DBus and my sanity do not get along, and I am sure it is the same way for others. A common library should be a must. I'd suggest MIT licencing for that.

--[[User:Nenolod|William Pitcock]] 10:20, 7 December 2006 (CET)


------

The spec looks like a good start to me, although I've got a couple of nitpicks/questions:

* The XMMS2 version has seeking in miliseconds, but the "length" metadata is only in seconds - I think that it would be worth making "length" be miliseconds too. The BMPx/VLC version has it as an int between 0 and 100, and if we wanted "fraction" rather than "position" seeking, using a float so you have arbitrary position would be a good idea. After all, an average song would have granularity of two or three seconds with 0-100, let along songthing longer like a video.

* Similarly for audio volume, using a 0.0-1.0 float is probably better than a 0-100 integer. Not that you really need the accuracy, but I don't see any reason to artificially limit the granularity.

* Much of the Tracklist-related API either doesn't make sense or doesn't have the same meaning for "library based" players that don't have a "main tracklist". Some library based players have a "queue" which kind of maps to the idea of "main playlist" but not all have them. However some of the API, particularly previous/next and shuffle/repeat, still does make sense for them. One other option would be for these players to expose multiple tracklist objects, but that would mean moving some of the API out somewhere else.

* Also, there should probably be some signal that the tracklist has changed, so client will know that their information is out of date.

* On the metadata, video-codec and audio-codec are listed as being listed "as fourcc". A reasonable number of players (particularly audio-only ones) won't know this without embedding a mimetype->fourcc mapping table, perhaps using mimetype would be better?

[[User:Doctau|James Livingston]]