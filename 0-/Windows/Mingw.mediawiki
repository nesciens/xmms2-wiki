__TOC__

==Prepare the Environment==
Download and install these in order! Program versions used in this howto are in parenthesis.

*[http://sourceforge.net/project/showfiles.php?group_id=2435 MinGW] (5.0.3)
*[http://sourceforge.net/project/showfiles.php?group_id=2435 MSYS] (1.0.11) - Do the post-install configuration to integrate MSYS with MinGW. IMPORTANT: Do yourself a *huge* favor and install this in the same directory as MinGW, leaving off the trailing /1.0 as well.
*[http://www.python.org/download/ Python] (2.5)
*[http://sourceforge.net/project/showfiles.php?group_id=30337&package_id=22359&release_id=408906 Scons] (0.96.92) - Note: at the time of this writing, [http://freehackers.org/~tnagy/bksys.html Waf] is being researched as a potential replacement for Scons

==Set up Source and Dependencies==
The order here is not so important. :)

*Download the XMMS2 source from one of the git trees [http://git.xmms.se/ here] and unpack it in your user directory. Note that xmms2-juhovh.git-snapshot-8f0c1928d916975e7a19da846475a217e43fd97b is being used for this howto and (as of this writing) it is the only one that contains certain patches that will ease the build process. Also note that you will probably need to use the tar or bzip tool from MSYS to extract this properly.

*Download and unpack the [http://dan.chokola.com/files/xmms2/xmms2_win32_deps.zip required libraries] into your MinGW root directory.
-OR-
*Download and unpack them separately. It's a good idea to unpack them first into an empty temporary directory as a sandbox since some of the files have READMEs and some unzip into unexpected directories.
**[http://www.gimp.org/~tml/gimp/win32/downloads.html GLib and GLib-dev] (1.12.1)
**[http://www.sqlite.org/download.html SQLiteDLL] (3.3.8)
**[http://sourceforge.net/project/showfiles.php?group_id=25167 gettext] (0.13.1)
**[http://sourceforge.net/project/showfiles.php?group_id=25167 libiconv] (1.9.1)
**[http://www.gimp.org/~tml/gimp/win32/downloads.html pkg-config] (0.20)
**Put a sqlite3.pc into /usr/lib/pkgconfig/ like this:
 prefix=/usr
 exec_prefix=${prefix}
 libdir=${exec_prefix}/lib
 includedir=${exec_prefix}/include
 
 Name: SQLite
 Description: SQL database engine
 Version: 3.3.8
 Libs: -L${libdir} -lsqlite3
 Cflags: -I${includedir}

TODO: Optional libraries (for plugins).

==Preparing for Building==
*Start MSYS
*SCons relies heavily on pkg-config to find and build certain files properly, but MSYS doesn't configure PKG_CONFIG_PATH by default, so type:
 export PKG_CONFIG_PATH=/usr/lib/pkgconfig
*You'll want python and SCons in your PATH as well, so type:
 export PATH=$PATH:/path/to/python:/path/to/python/Scripts
*Alternatively you might want to add these to /etc/profile and run source /etc/profile

TODO: Patches. Reeeaaaly need patches here.

==Building with SCons==
*cd into the XMMS2 source directory
 cd ~/xmms2-juhovh.git-snapshot-8f0c1928d916975e7a19da846475a217e43fd97b
*Start Scons
 scons

==Using XMMS2 on Windows==
Unlike Unix-based machines, there are no Unix sockets on windows, so IPC must be done using TCP. To keep your daemon private from the network, make sure your IPC path uses a local loopback address (like 127.0.0.1). Also important to note is that there can be multiple daemons listening to the same socket, but only one will receive commands. Currently, it is up to the user to control this.
Since Windows doesn't wait for child processes to run, xmms2-launcher is more or less useless in the Windows world (and in fact, it's only intended to compile on *nix-flavored machines). Simply run:
 xmms2d
and enjoy! You should be able to control it with the shipped CLI. Try:
 xmms2 stats